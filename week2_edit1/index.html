<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Titanic Survival Classifier (TensorFlow.js)</title>

  <!-- TensorFlow.js and tfjs-vis (as requested) -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@latest"></script>

  <!-- Link to app logic -->
  <script defer src="app.js"></script>

  <style>
    /* Basic responsive styling (pink theme as requested earlier) */
    :root {
      --pink-1: #fff0f5;
      --pink-2: #ff69b4;
      --pink-3: #ffc0cb;
      --text: #333;
    }
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: var(--pink-1);
      color: var(--text);
      padding: 18px;
    }
    .container {
      max-width: 1100px;
      margin: 0 auto;
      background: white;
      border-radius: 10px;
      padding: 18px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    }
    h1 { color: var(--pink-2); margin-top: 0; }
    section { margin-bottom: 18px; padding: 12px; border-radius: 8px; border: 1px solid #ffe6f2; }
    label { display: block; margin-bottom: 6px; }
    input[type="file"] { display:block; margin-bottom: 8px; }
    button {
      background: var(--pink-2);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      margin-right: 8px;
    }
    button[disabled] { background: var(--pink-3); cursor: not-allowed; }
    .row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    .metrics-container { display:flex; gap:16px; flex-wrap:wrap; }
    .card { border: 1px solid #ffe6f2; padding:10px; border-radius:6px; min-width:200px; background:#fff; }
    table { width:100%; border-collapse: collapse; margin-top:8px; }
    th, td { border:1px solid #ffd6e8; padding:6px; text-align:left; font-size:13px; }
    th { background: var(--pink-2); color: white; }
    #charts > div { margin-top: 8px; }
    .small { font-size:13px; color:#666; }
    @media (max-width:768px) {
      .metrics-container { flex-direction: column; }
    }
    /* deployment note box */
    .note { background:#fff0f8; border: 1px solid #ffd6e8; padding:10px; border-radius:6px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Titanic Survival Classifier â€” TFJS (Browser)</h1>

    <!-- 1. Data Load -->
    <section id="data-load">
      <h2>1. Data Load</h2>
      <p class="small">Upload Kaggle Titanic CSV files (train.csv, test.csv). This app parses quotes/commas in fields correctly.</p>
      <label>Training Data (train.csv): <input id="train-file" type="file" accept=".csv"></label>
      <label>Test Data (test.csv): <input id="test-file" type="file" accept=".csv"></label>
      <div class="row">
        <button id="load-data-btn">Load Data</button>
        <button id="inspect-btn" disabled>Inspect Data</button>
      </div>
      <div id="data-status" class="small"></div>
      <div id="data-preview" style="overflow:auto; max-height:220px;"></div>
      <div id="data-stats"></div>
      <div id="charts"></div>
    </section>

    <!-- 2. Preprocessing -->
    <section id="preprocessing">
      <h2>2. Preprocessing</h2>
      <div class="row">
        <label><input id="add-family-features" type="checkbox" checked> Add family features (FamilySize, IsAlone)</label>
        <button id="preprocess-btn" disabled>Preprocess Data</button>
      </div>
      <div id="preprocessing-output" class="small"></div>
    </section>

    <!-- 3. Model -->
    <section id="model-section">
      <h2>3. Model</h2>
      <div class="row">
        <button id="create-model-btn" disabled>Create Model</button>
        <button id="train-btn" disabled>Train Model</button>
        <button id="stop-train-btn" disabled>Stop Training</button>
      </div>
      <div id="model-summary"></div>
      <div id="training-status" class="small"></div>
    </section>

    <!-- 4. Metrics / Evaluation -->
    <section id="metrics-section">
      <h2>4. Metrics & Evaluation</h2>
      <div class="row">
        <label>ROC threshold slider: <input id="threshold-slider" type="range" min="0" max="1" step="0.01" value="0.50" disabled> <span id="threshold-value">0.50</span></label>
        <button id="eval-btn" disabled>Compute ROC & Metrics</button>
      </div>

      <div class="metrics-container" style="margin-top:12px;">
        <div id="confusion-matrix" class="card"></div>
        <div id="performance-metrics" class="card"></div>
        <div id="roc-chart" class="card" style="min-width:320px;"></div>
      </div>
    </section>

    <!-- 5. Prediction -->
    <section id="prediction-section">
      <h2>5. Prediction</h2>
      <div class="row">
        <button id="predict-btn" disabled>Predict Test Data</button>
        <button id="export-btn" disabled>Export Results (CSV & Model)</button>
      </div>
      <div id="prediction-output"></div>
    </section>

    <!-- Deployment notes -->
    <section id="deployment">
      <h2>Deployment Notes</h2>
      <div class="note">
        <p>Create a public GitHub repository, commit <code>index.html</code> and <code>app.js</code>, enable GitHub Pages for the main branch and root folder. Then open the URL: <code>https://[your-username].github.io/[repository-name]</code> to test.</p>
      </div>
    </section>
  </div>
</body>
</html>
